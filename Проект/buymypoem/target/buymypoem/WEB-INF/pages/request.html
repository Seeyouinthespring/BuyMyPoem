<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <link th:href="@{/css/composition.css}" rel="stylesheet">
    <title>Заявки</title>
</head>
<body class="main">
<div class="top">
    <div class="label">
        BuyMyPoem
    </div>
</div>
<div class="basis">
    <div class="basis_left">
        <a th:href="@{/my_profile}" class="a_menu">Мой профиль</a>
        <a href="" class="a_menu">Список авторов</a>
        <a th:href="@{/all_composition}" class="a_menu">Список произведений</a>
        <a th:href="@{/requests}" class="a_menu">Список заявок</a>
        <a href="" class="a_menu">Рейтинг произведений</a>
        <a href="" class="a_menu">Рейтинг авторов</a>
    </div>

    <div class="basis_right">
        <form action="#" th:action="@{/find_request}" method="post">
            <div class="div_search">
                <div class="element">
                    <select class="input_text_request" th:field="*{ftype.typeID}">
                        <option th:each="type : ${types}" th:value="${type.typeID}" th:text="${type.title}">Тип
                        </option>
                    </select>
                </div>
                    <div class="element">
                        <select class="input_text_request" th:field="*{fgenre.genreID}">
                            <option th:each="genre : ${genres}" th:value="${genre.genreID}" th:text="${genre.title}">Жанр
                            </option>
                        </select>
                    </div>
                    <div class="element">
                        <input class="input_text_request" type="text" placeholder="введите имя заказчика"  th:name="slogin"/>
                    </div>
                    <div class="element">
                        <button class="input_button_request">Найти</button>
                    </div>
                </div>
        </form>

    <table>
        <tr th:each="text : ${list}">
            <td><form action="#" th:action="@{/request/{id} (id=${text.requestID})}" method="post">

                <div class="infoReques">
                    <img height="30px"  width="30px" th:src="@{'data:image/png;base64,' + ${text.user.photo} }" />
                    <span th:text="${text.user.login}">Автор</span>
                </div>

                <div class="description">
                    <div class="text">Дата публикации: <span th:text="${text.publicationdate}">Дата</span></div>
                    <div class="text">Тип произведения: <span th:text="${text.type.title}">Тип</span></div>
                    <div class="text">Жанр:  <span th:text="${text.genre.title}"> Жанр </span></div>
                    <div class="info_button">
                        <button class="button_for">Посмотреть</button>
                    </div>
                </div>
            </form>
            </td>
        </tr>
    </table>
    <div class="buttonsContaner">
        <span class="msg" th:text="${msg}">Сообщение</span>
        <a th:if="${page}>1" class="buttonBackForward" th:href="@{/requests/{p} (p=${page}-1)}">Назад</a>
        <a th:if="${page}<${end}" class="buttonBackForward" th:href="@{/requests/{p}(p=${page}+1)}">Вперед</a>
    </div>
    </div>

</div>
</div>
</body>
</html>